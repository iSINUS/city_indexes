## Number of web server workers
worker_processes: 4

# Database configuration. This can also be a list of PG configs.
postgres:
  # Database connection string. You can use env vars too, for example:
  #   ${DATABASE_URL:-postgresql://postgres@localhost/db}
  connection_string: $DATABASE_URL

  # Limit the number of table geo features included in a tile. Unlimited by default.
  max_feature_count: 100

  # Control the automatic generation of bounds for spatial tables [default: quick]
  # 'calc' - compute table geometry bounds on startup.
  # 'quick' - same as 'calc', but the calculation will be aborted if it takes more than 5 seconds.
  # 'skip' - do not compute table geometry bounds on startup.
  auto_bounds: skip

  # Associative arrays of function sources
  functions:
    city_indexes:
      # Schema name (required)
      schema: public

      # Function name (required)
      function: city_indexes

      # An integer specifying the minimum zoom level
      minzoom: 9

      # An integer specifying the maximum zoom level. MUST be >= minzoom
      maxzoom: 16

      # The maximum extent of available map tiles. Bounds MUST define an area
      # covered by all zoom levels. The bounds are represented in WGS:84
      # latitude and longitude values, in the order left, bottom, right, top.
      # Values may be integers or floating point numbers.
      bounds: [-180.0, -90.0, 180.0, 90.0]
    city_indexes_full:
      schema: public
      function: city_indexes_full
      minzoom: 9
      maxzoom: 16
      bounds: [-180.0, -90.0, 180.0, 90.0]
    city_indexes_isochrones:
      schema: public
      function: city_indexes_isochrones
      minzoom: 9
      maxzoom: 16
      bounds: [-180.0, -90.0, 180.0, 90.0]
